(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-62888080"],{1148:function(t,e,s){"use strict";var i=s("a691"),a=s("1d80");t.exports="".repeat||function(t){var e=String(a(this)),s="",n=i(t);if(n<0||n==1/0)throw RangeError("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(e+=e))1&n&&(s+=e);return s}},"17f5":function(t,e,s){"use strict";var i=s("cd91"),a=s.n(i);a.a},"30c6":function(t,e,s){},"3ba4":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"detail"}},[i("nav-bar",{scopedSlots:t._u([{key:"left",fn:function(){return[i("img",{staticClass:"left",attrs:{src:s("a11e")},on:{click:t.back}})]},proxy:!0},{key:"center",fn:function(){return[i("TabControl",{ref:"tc",attrs:{"is-no-line":!0,"tab-list":t.tabList},on:{toggleList:t.toggleList}})]},proxy:!0}])}),i("scroll",{ref:"sc",staticClass:"content",attrs:{options:t.options},on:{scroll:t.contentScroll}},[i("item-detail",{attrs:{item:t.goods}}),i("shop-detail",{attrs:{shop:t.shops}}),i("detail-images",{attrs:{detailInfo:t.detailInfo}}),i("detail-params",{ref:"detailParams",attrs:{"item-params":t.itemParams}}),i("detail-comments",{ref:"detailComments",attrs:{comments:t.comments}}),i("goods-list",{ref:"recommends",attrs:{"show-goods":t.recommends}})],1),i("detail-btn-group")],1)},a=[];s("b0c0");function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var c=s("1bab"),r="/detail",o="/recommend";function l(t){return Object(c["a"])({url:r,method:"get",params:{iid:t}})}function m(){return Object(c["a"])({url:o})}var f=function t(e,s,i){n(this,t),this.title=e.title,this.desc=e.desc,this.highNewPrice=e.highNowPrice,this.highPrice=e.highPrice,this.columns=s,this.services=i,this.discountDesc=e.discountDesc,this.discountBg=e.discountBgColor,this.swipeImgs=e.topImages},u=function t(e){n(this,t),this.cGoods=e.cGoods,this.cSells=e.cSells,this.cFans=e.cFans,this.name=e.name,this.shopLogo=e.shopLogo,this.shopUrl=e.shopUrl,this.score=e.score},d=s("325c"),p=s("f1d4"),h=s("5d17"),v=s("9bd0"),b=function(){var t=this,e=t.$createElement,s=t._self._c||e;return 0!=Object.keys(t.item).length?s("div",{staticClass:"item-detail",attrs:{id:"itemDetail"}},[s("div",{staticClass:"item-img"},[s("my-swipe",{staticClass:"detail-banner",attrs:{"emit-name":"dImgLoaded",banners:t.item.swipeImgs}})],1),s("div",{staticClass:"info-wrap"},[s("p",{staticClass:"item-title"},[t._v(t._s(t.item.title))]),s("div",{staticClass:"item-price"},[s("span",{staticClass:"discount-price"},[t._v("¥"+t._s(t.item.highNewPrice))]),""!=t.item.discountDesc?s("a",[s("span",{staticClass:"price"},[t._v("¥"+t._s(t.item.highPrice))]),s("span",{staticClass:"today-discount",style:{"background-color":t.item.discountBg}},[t._v(t._s(t.item.discountDesc))])]):t._e()]),t.item.columns?s("div",{staticClass:"item-info"},[s("p",{staticClass:"item-sold"},[t._v(t._s(t.item.columns[0]))]),s("p",{staticClass:"item-collect"},[t._v(t._s(t.item.columns[1]))]),s("p",{staticClass:"item-deliver"},[t._v(t._s(t.item.services[t.item.services.length-1].name))])]):t._e(),s("div",{staticClass:"info-service"},t._l(t.item.services.length-1,(function(e){return s("div",{staticClass:"service"},[s("img",{staticClass:"service-icon",attrs:{src:t.item.services[e-1].icon}}),s("span",{staticClass:"service-title"},[t._v(t._s(t.item.services[e-1].name))])])})),0)])]):t._e()},g=[],_=s("8691"),C={name:"ItemDetail",components:{MySwipe:_["a"]},props:{item:Object}},I=C,x=(s("528e"),s("2877")),y=Object(x["a"])(I,b,g,!1,null,"04202b91",null),O=y.exports,w=function(){var t=this,e=t.$createElement,s=t._self._c||e;return 0!=Object.keys(t.shop).length?s("div",{staticClass:"shop-detail",attrs:{id:"shopDetail"}},[s("div",{staticClass:"shop-name"},[s("img",{attrs:{src:t.shop.shopLogo}}),s("span",[t._v(t._s(t.shop.name))])]),s("div",{staticClass:"shop-wrap"},[s("div",{staticClass:"shop-info"},[s("div",{staticClass:"goods"},[s("p",{staticClass:"number"},[t._v(t._s(t._f("sellCounts")(t.shop.cSells)))]),s("p",[t._v("总销量")])]),s("div",{staticClass:"goods"},[s("p",{staticClass:"number"},[t._v(t._s(t.shop.cGoods))]),s("p",[t._v("全部宝贝")])])]),s("div",{staticClass:"shop-score"},[s("table",t._l(t.shop.score,(function(e){return s("tr",{class:{bad:!e.isBetter}},[s("td",[s("span",[t._v(t._s(e.name))])]),s("td",{staticStyle:{"text-align":"left"}},[s("span",[t._v(t._s(e.score))])]),s("td",[e.isBetter?s("span",{staticClass:"high"},[t._v("高")]):s("span",{staticClass:"low"},[t._v("低")])])])})),0)])]),s("div",{staticClass:"go-wrap"},[s("a",{staticClass:"goBtn",attrs:{href:t.shop.shopUrl}},[t._v("进店逛逛")])])]):t._e()},$=[],j=(s("b680"),{name:"ShopDetail",props:{shop:{type:Object,default:function(){return{}}}},filters:{sellCounts:function(t){return t>=1e4?"".concat((t/1e4).toFixed(1),"万"):t}}}),k=j,D=(s("517c"),Object(x["a"])(k,w,$,!1,null,"0616ed14",null)),S=D.exports,P=function(){var t=this,e=t.$createElement,s=t._self._c||e;return 0!=Object.keys(t.detailInfo).length?s("div",{staticClass:"detail border-bottom"},[s("div",{staticClass:"detail-text"},[s("div",{staticClass:"start"}),s("p",[t._v(t._s(t.detailInfo.desc))]),s("p",[t._v(t._s(t.detailInfo.detailImage[0].desc))]),t._m(0),s("p",[t._v(t._s(t.detailInfo.detailImage[0].key))])]),t._l(t.detailInfo.detailImage[0].list,(function(e){return s("div",{staticClass:"images-item"},[s("img",{attrs:{src:e},on:{load:t.imageLoaded}})])}))],2):t._e()},L=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"clear"},[s("div",{staticClass:"end"})])}],E={name:"DetailImages",props:{detailInfo:{type:Object,default:function(){return{}}}},methods:{imageLoaded:function(){this.$bus.$emit("dImgLoaded")}}},T=E,B=(s("17f5"),Object(x["a"])(T,P,L,!1,null,"86c685f2",null)),F=B.exports,N=function(){var t=this,e=t.$createElement,s=t._self._c||e;return 0!=Object.keys(t.itemParams).length?s("div",{staticClass:"detail-params border-bottom",attrs:{id:"detailParams"}},[s("div",{staticClass:"size"},[s("table",t._l(t.filterSize(t.itemParams.rule.tables[0]),(function(e){return s("tr",t._l(e,(function(e){return s("td",[t._v(" "+t._s(e)+" ")])})),0)})),0)]),s("div",{staticClass:"params"},[s("table",t._l(t.itemParams.info.set,(function(e){return s("tr",[s("td",{staticClass:"params-key"},[t._v(t._s(e.key))]),s("td",{staticClass:"params-value"},[t._v(t._s(e.value))])])})),0)])]):t._e()},G=[],U=(s("4de4"),{name:"DetailParams",props:{itemParams:{type:Object,default:function(){return{}}}},methods:{filterSize:function(t){return t.filter((function(t){return"-"!=t[1]}))}}}),z=U,R=(s("9d43"),Object(x["a"])(z,N,G,!1,null,"7e5157aa",null)),J=R.exports,M=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"btn-group"},[t._m(0),t._m(1),i("div",{staticClass:"light-btn"},[t.isCollected?i("img",{attrs:{src:s("b6db")}}):i("img",{attrs:{src:s("3cb6")}}),i("p",[t._v("收藏")])]),i("div",{staticClass:"deep-btn cart-btn"},[t._v("加入购物车")]),i("div",{staticClass:"deep-btn buy-btn"},[t._v("购买")])])},A=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"light-btn"},[i("img",{attrs:{src:s("becb")}}),i("p",[t._v("客服")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"light-btn"},[i("img",{attrs:{src:s("827f")}}),i("p",[t._v("店铺")])])}],W={name:"DetailBtnGroup",data:function(){return{isCollected:!1}}},q=W,H=(s("5903"),Object(x["a"])(q,M,A,!1,null,"a07e96c8",null)),K=H.exports,Q=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"detail-comments border-bottom",attrs:{id:"detailComment"}},[t._m(0),0!=Object.keys(t.comments)?s("div",[s("div",{staticClass:"comment-content"},[s("div",{staticClass:"comment-user"},[s("img",{attrs:{src:t.comments.user.avatar}}),s("span",[t._v(t._s(t.comments.user.uname))])]),s("p",{staticClass:"comment"},[t._v(t._s(t.comments.content))]),s("p",{staticClass:"comment-info"},[s("span",{staticClass:"comment-time"},[t._v(t._s(t._f("getLocalTime")(t.comments.created)))]),s("span",[t._v(t._s(t.comments.style))])]),null!=t.comments.images?s("div",{staticClass:"comment-img"},t._l(t.comments.images,(function(t){return s("img",{attrs:{src:t}})})),0):t._e()])]):s("div",{staticStyle:{"margin-top":"20px"}},[s("p",[t._v("暂无评论")])])])},V=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"comment-title"},[s("p",[t._v("用户评价")]),s("a",[t._v("更多")])])}],X={name:"DetailComments",props:{comments:{type:Object,default:function(){return{}}}},filters:{getLocalTime:function(t){return new Date(1e3*parseInt(t)).toLocaleString()}}},Y=X,Z=(s("7f97"),Object(x["a"])(Y,Q,V,!1,null,"48d622fa",null)),tt=Z.exports,et=s("6d71"),st={name:"Details",components:{NavBar:p["a"],DetailBtnGroup:K,Scroll:h["a"],TabControl:v["a"],ItemDetail:O,ShopDetail:S,DetailImages:F,DetailParams:J,DetailComments:tt,GoodsList:et["a"]},data:function(){return{options:{click:!0,probeType:1,pullUpLoad:!0},item:{},goods:{},shops:{},detailInfo:{},itemParams:{},comments:{},recommends:[],currentIndex:0,tabList:[{title:"商品",type:"item"},{title:"参数",type:"param"},{title:"评论",type:"comment"},{title:"推荐",type:"recommend"}],tabOffset:[]}},methods:{toggleList:function(t,e){this.scrollTo(-this.tabOffset[e],500)},back:function(){this.$router.back()},scrollTo:function(t,e){this.$refs.sc.myScrollTo(0,t,e)},getTabOffset:function(){console.log("get offset"),this.tabOffset=[0],this.tabOffset.push(this.$refs.detailParams.$el.offsetTop),this.tabOffset.push(this.$refs.detailComments.$el.offsetTop),this.tabOffset.push(this.$refs.recommends.$el.offsetTop)},contentScroll:function(t){var e=-t.y;e>=this.tabOffset[0]&&e<this.tabOffset[1]&&0!=this.currentIndex?(this.currentIndex=0,this.$refs.tc.currentIndex=0,console.log(0)):e>=this.tabOffset[1]&&e<this.tabOffset[2]&&1!=this.currentIndex?(this.currentIndex=1,this.$refs.tc.currentIndex=1,console.log(1)):e>=this.tabOffset[2]&&e<this.tabOffset[3]&&2!=this.currentIndex?(this.currentIndex=2,this.$refs.tc.currentIndex=2,console.log(2)):e>=this.tabOffset[3]&&3!=this.currentIndex&&(this.currentIndex=3,this.$refs.tc.currentIndex=3,console.log(3))}},created:function(){var t=this;l(this.$route.params.iid).then((function(e){var s=e.result;t.item=e,t.goods=new f(s.itemInfo,s.columns,s.shopInfo.services),t.shops=new u(s.shopInfo),t.detailInfo=s.detailInfo,t.itemParams=s.itemParams,0!=s.rate.cRate&&(t.comments=s.rate.list[0])})).catch((function(t){console.log(t)})),m().then((function(e){t.recommends=e.data.list})).catch((function(t){console.log(t)}))},mounted:function(){var t=this,e=Object(d["a"])(this.$refs.sc.refreshScroll,300);this.$bus.$on("dImgLoaded",(function(){e(t.getTabOffset)}))},destroyed:function(){this.$bus.$off()}},it=st,at=(s("4db6"),Object(x["a"])(it,i,a,!1,null,"713c8f6a",null));e["default"]=at.exports},"3cb6":function(t,e,s){t.exports=s.p+"img/collect.611e675f.svg"},"408a":function(t,e,s){var i=s("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=i(t))throw TypeError("Incorrect invocation");return+t}},"4db6":function(t,e,s){"use strict";var i=s("bae8"),a=s.n(i);a.a},"4de4":function(t,e,s){"use strict";var i=s("23e7"),a=s("b727").filter,n=s("1dde"),c=s("ae40"),r=n("filter"),o=c("filter");i({target:"Array",proto:!0,forced:!r||!o},{filter:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},"517c":function(t,e,s){"use strict";var i=s("30c6"),a=s.n(i);a.a},"528e":function(t,e,s){"use strict";var i=s("9d1d"),a=s.n(i);a.a},5903:function(t,e,s){"use strict";var i=s("95bd"),a=s.n(i);a.a},"7f97":function(t,e,s){"use strict";var i=s("960a"),a=s.n(i);a.a},"827f":function(t,e,s){t.exports=s.p+"img/shop.23b06d4f.svg"},"95bd":function(t,e,s){},"960a":function(t,e,s){},"9d1d":function(t,e,s){},"9d43":function(t,e,s){"use strict";var i=s("eaf1"),a=s.n(i);a.a},a11e:function(t,e,s){t.exports=s.p+"img/back.b32163bf.svg"},b680:function(t,e,s){"use strict";var i=s("23e7"),a=s("a691"),n=s("408a"),c=s("1148"),r=s("d039"),o=1..toFixed,l=Math.floor,m=function(t,e,s){return 0===e?s:e%2===1?m(t,e-1,s*t):m(t*t,e/2,s)},f=function(t){var e=0,s=t;while(s>=4096)e+=12,s/=4096;while(s>=2)e+=1,s/=2;return e},u=o&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r((function(){o.call({})}));i({target:"Number",proto:!0,forced:u},{toFixed:function(t){var e,s,i,r,o=n(this),u=a(t),d=[0,0,0,0,0,0],p="",h="0",v=function(t,e){var s=-1,i=e;while(++s<6)i+=t*d[s],d[s]=i%1e7,i=l(i/1e7)},b=function(t){var e=6,s=0;while(--e>=0)s+=d[e],d[e]=l(s/t),s=s%t*1e7},g=function(){var t=6,e="";while(--t>=0)if(""!==e||0===t||0!==d[t]){var s=String(d[t]);e=""===e?s:e+c.call("0",7-s.length)+s}return e};if(u<0||u>20)throw RangeError("Incorrect fraction digits");if(o!=o)return"NaN";if(o<=-1e21||o>=1e21)return String(o);if(o<0&&(p="-",o=-o),o>1e-21)if(e=f(o*m(2,69,1))-69,s=e<0?o*m(2,-e,1):o/m(2,e,1),s*=4503599627370496,e=52-e,e>0){v(0,s),i=u;while(i>=7)v(1e7,0),i-=7;v(m(10,i,1),0),i=e-1;while(i>=23)b(1<<23),i-=23;b(1<<i),v(1,1),b(2),h=g()}else v(0,s),v(1<<-e,0),h=g()+c.call("0",u);return u>0?(r=h.length,h=p+(r<=u?"0."+c.call("0",u-r)+h:h.slice(0,r-u)+"."+h.slice(r-u))):h=p+h,h}})},b6db:function(t,e,s){t.exports=s.p+"img/collect_active.c72c1243.svg"},bae8:function(t,e,s){},becb:function(t,e,s){t.exports=s.p+"img/cs.1bd0043a.svg"},cd91:function(t,e,s){},eaf1:function(t,e,s){}}]);
//# sourceMappingURL=chunk-62888080.7a8d6ac6.js.map